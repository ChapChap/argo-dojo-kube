argo-cd:
  configs:
    params:
      server.insecure: true
    cm:
      # Configuration OIDC Google
      url: http://argocd.homelab.lan
      dex.config: |
        connectors:
          - type: oidc
            id: google
            name: Google
            config:
              issuer: https://accounts.google.com
              clientID: $dex.google.clientId
              clientSecret: $dex.google.clientSecret
              redirectURI: http://argocd.homelab.lan/api/dex/callback
    rbac:
      # Policy RBAC - tous les utilisateurs authentifiés sont admins par défaut
      # Vous pouvez personnaliser cela pour restreindre les permissions
      policy.default: role:admin
      policy.csv: |
        g, authenticated, role:admin
  global:
    domain: argocd.homelab.lan
    networkPolicy:
      create: true
      defaultDenyIngress: false
  server:
    ingress:
      ingressClassName: traefik
      enabled: true
      tls: false
    # resources:
    #   requests:
    #     cpu: 100m
    #     memory: 256Mi
    #   limits:
    #     memory: 256Mi

  controller:
    resources:
      requests:
        cpu: 100m
        memory: 512Mi
      limits:
        memory: 512Mi

  repoServer:
    resources:
      requests:
        cpu: 500m
        memory: 1Gi
      limits:
        memory: 1Gi

  # applicationSet:
  #   resources:
  #     requests:
  #       cpu: 10m
  #       memory: 192Mi
  #     limits:
  #       memory: 256Mi

  # redis:
  #   resources:
  #     requests:
  #       cpu: 10m
  #       memory: 32Mi
  #     limits:
  #       memory: 128Mi

  # dex:
  #   resources:
  #     requests:
  #       cpu: 10m
  #       memory: 128Mi
  #     limits:
  #       memory: 192Mi
